<assembly>
  <id>distribution</id>
  <formats>
    <format>tar.gz</format>
  </formats>
  <fileSets>
    <fileSet>
      <directory>${basedir}/src/assemble</directory>
      <includes>
        <include>*.txt</include>
        <include>*.TXT</include>
        <include>*.html</include>
      </includes>
      <excludes>
        <exclude>*LICENSE*</exclude>
      </excludes>
      <filtered>true</filtered>
      <outputDirectory>/</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${basedir}/src/assemble</directory>
      <includes>
        <include>*LICENSE*</include>
      </includes>
      <outputDirectory>/licenses</outputDirectory>
    </fileSet>
    <!-- pull some files in from svn:externals ehcache/trunk/core/src/assemble -->
    <fileSet>
      <directory>${basedir}/src/core-assemble</directory>
      <includes>
        <include>CHANGELOG.*</include>
      </includes>
      <outputDirectory>/</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${basedir}/src/core-assemble</directory>
      <includes>
        <include>THIRD-PARTY-LICENSES.*</include>
      </includes>
      <outputDirectory>/licenses</outputDirectory>
    </fileSet>
    <fileSet>
      <!-- include ehcache.xsd from ehcache-core project via svn:externals"
           Note that we don't want the original ehcache.xml since
           PM wants the ehcache-terracotta.xml to be ehcache.xml in Ehcache Terracotta kit
           That file is included below
       -->
      <directory>${basedir}/src/main/config</directory>
      <includes>
        <include>ehcache.xsd</include>
      </includes>
      <outputDirectory>/</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${kit_path}/bin</directory>
      <includes>
        <include>start-tc-server.*</include>
        <include>stop-tc-server.*</include>
        <include>dev-console.*</include>
        <include>version.*</include>
      </includes>
      <fileMode>0755</fileMode>
      <outputDirectory>/terracotta/bin</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${kit_path}/lib</directory>
      <outputDirectory>/terracotta/lib</outputDirectory>
      <fileMode>0755</fileMode>
    </fileSet>
    <fileSet>
      <directory>${kit_path}/third-party</directory>
      <outputDirectory>/terracotta/third-party</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${kit_path}/common</directory>
      <outputDirectory>/terracotta/common</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${kit_path}/platform/modules</directory>
      <includes>
        <include>**/clustered-surefire-2.3/**</include>
      </includes>
      <outputDirectory>/terracotta/platform/modules</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${kit_path}/ehcache/samples</directory>
      <excludes>
        <exclude>**/relative-paths.*</exclude>
      </excludes>
      <outputDirectory>/samples</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${kit_path}/docs</directory>
      <includes>
        <include>tc-config-express-reference.xml</include>
      </includes>
      <outputDirectory>/terracotta/docs</outputDirectory>
    </fileSet>
    <fileSet>
      <directory>${basedir}/src/terracotta</directory>
      <includes>
        <include>*.txt</include>
      </includes>
      <outputDirectory>/terracotta</outputDirectory>
    </fileSet>
    <fileSet>
      <!-- overwrite relative-paths scripts for the samples -->
      <directory>${basedir}/src/terracotta</directory>
      <includes>
        <include>relative-paths.*</include>
      </includes>
      <outputDirectory>/samples/colorcache/bin</outputDirectory>
    </fileSet>
    <fileSet>
      <!-- overwrite relative-paths scripts for the samples -->
      <directory>${basedir}/src/terracotta</directory>
      <includes>
        <include>relative-paths.*</include>
      </includes>
      <outputDirectory>/samples/hibernate/bin</outputDirectory>
    </fileSet>
  </fileSets>
  <files>
    <file>
      <!-- rename ehcache-terracotta.xml to ehcache.xml -->
      <source>${basedir}/src/main/config/ehcache-terracotta.xml</source>
      <destName>ehcache.xml</destName>
      <outputDirectory>/</outputDirectory>
    </file>
  </files>
  <dependencySets>
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <scope>runtime</scope>
    </dependencySet>
    <dependencySet>
      <outputDirectory>lib</outputDirectory>
      <scope>provided</scope>
      <includes>
        <include>org.slf4j:slf4j-jdk14</include>
      </includes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>/src</outputDirectory>
      <unpack>true</unpack>
      <scope>provided</scope>
      <includes>
        <include>*:sources</include>
      </includes>
    </dependencySet>
    <dependencySet>
      <outputDirectory>/javadoc</outputDirectory>
      <unpack>true</unpack>
      <scope>provided</scope>
      <includes>
        <include>*:javadoc</include>
      </includes>
    </dependencySet>
  </dependencySets>
</assembly>
